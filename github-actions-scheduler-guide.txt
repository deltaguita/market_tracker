GitHub Actions å®šæ™‚ä»»å‹™æŠ€è¡“æŒ‡å—
=====================================

ä¸€ã€åŸºæœ¬æ¶æ§‹
-----------
æª”æ¡ˆä½ç½®: .github/workflows/your-job.yml

æœ€å°å¯é‹è¡Œç¯„ä¾‹:
```yaml
name: My Scheduled Job

on:
  schedule:
    - cron: '30 10 * * 1-5'    # UTC æ™‚é–“ï¼Œé€±ä¸€è‡³é€±äº” 10:30
  workflow_dispatch:           # å…è¨±æ‰‹å‹•è§¸ç™¼

jobs:
  my-job:
    runs-on: ubuntu-latest     # ä½¿ç”¨ GitHub å…è²» Ubuntu runner
    steps:
      - uses: actions/checkout@v4
      - name: Run script
        run: python main.py
```

äºŒã€Cron æ’ç¨‹èªæ³•
-----------------
æ ¼å¼: åˆ† æ™‚ æ—¥ æœˆ æ˜ŸæœŸ
ç¯„ä¾‹:
  '0 0 * * *'      æ¯å¤© 00:00 UTC
  '30 10 * * 1-5'  é€±ä¸€åˆ°é€±äº” 10:30 UTC
  '0 */6 * * *'    æ¯ 6 å°æ™‚
  '0 9 * * 1'      æ¯é€±ä¸€ 09:00 UTC

æ³¨æ„: GitHub ä½¿ç”¨ UTC æ™‚å€ï¼Œå°ç£æ™‚é–“éœ€ -8 å°æ™‚

ä¸‰ã€Python ç’°å¢ƒè¨­å®š
-------------------
```yaml
- name: Set up Python
  uses: actions/setup-python@v5
  with:
    python-version: '3.10'
    cache: 'pip'              # å¿«å– pip å¥—ä»¶åŠ é€Ÿ

- name: Install dependencies
  run: |
    python -m pip install --upgrade pip
    pip install pandas requests  # ä½ éœ€è¦çš„å¥—ä»¶
```

å››ã€Matrix ä¸¦è¡ŒåŸ·è¡Œ
-------------------
åŒæ™‚åŸ·è¡Œå¤šå€‹ä»»å‹™ï¼Œæ¯å€‹ç¨ç«‹ runner:

```yaml
jobs:
  parallel-job:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false        # ä¸€å€‹å¤±æ•—ä¸å½±éŸ¿å…¶ä»–
      matrix:
        task: [task1, task2, task3]
    steps:
      - run: python main.py --task ${{ matrix.task }}
```

äº”ã€ç’°å¢ƒè®Šæ•¸èˆ‡ Secrets
----------------------
è¨­å®šä½ç½®: GitHub Repo â†’ Settings â†’ Secrets and variables â†’ Actions

ä½¿ç”¨æ–¹å¼:
```yaml
- name: Run with secrets
  env:
    API_KEY: ${{ secrets.MY_API_KEY }}
  run: python main.py
```

å…­ã€ç³»çµ±å¥—ä»¶å®‰è£
----------------
```yaml
- name: Install system packages
  run: |
    sudo apt-get update
    sudo apt-get install -y fonts-noto-cjk  # ä¸­æ–‡å­—å‹
```

ä¸ƒã€å…è²»é¡åº¦
------------
å…¬é–‹å€‰åº«: ç„¡é™åˆ¶
ç§æœ‰å€‰åº«: 2,000 åˆ†é˜/æœˆ
å–®æ¬¡åŸ·è¡Œ: æœ€é•· 6 å°æ™‚

å…«ã€é™åˆ¶èˆ‡æ³¨æ„äº‹é …
------------------
1. æ’ç¨‹å¯èƒ½å»¶é² - é«˜è² è¼‰æ™‚ GitHub æœƒå»¶å¾ŒåŸ·è¡Œ
2. æœ€çŸ­é–“éš” 5 åˆ†é˜ - cron ä¸æ”¯æ´æ›´é »ç¹
3. 60 å¤©ç„¡æ´»å‹• - æ’ç¨‹æœƒè‡ªå‹•åœç”¨
4. å…±äº« IP - ç„¡æ³•æ§åˆ¶å‡ºå£ IP

ä¹ã€æ‰‹å‹•è§¸ç™¼å¸¶åƒæ•¸
------------------
```yaml
on:
  workflow_dispatch:
    inputs:
      target:
        description: 'Select target'
        required: true
        default: 'all'
        type: choice
        options:
          - all
          - option1
          - option2

jobs:
  my-job:
    steps:
      - run: echo "Target: ${{ github.event.inputs.target }}"
```

åã€å¯¦ç”¨æŠ€å·§
------------
1. å¿«å–ä¾è³´: cache: 'pip' æ¸›å°‘å®‰è£æ™‚é–“
2. æ¢ä»¶åŸ·è¡Œ: if: github.event.inputs.target == 'all'
3. è¼¸å‡ºæª”æ¡ˆ: ä½¿ç”¨ actions/upload-artifact@v4 ä¿å­˜çµæœ
4. ç™¼é€é€šçŸ¥: æ•´åˆ email/webhook åœ¨å®Œæˆå¾Œé€šçŸ¥

åä¸€ã€å®Œæ•´ç¯„æœ¬
--------------
```yaml
name: Scheduled Task

on:
  schedule:
    - cron: '0 2 * * *'
  workflow_dispatch:

jobs:
  run-task:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          cache: 'pip'
      
      - run: pip install -r requirements.txt
      
      - name: Execute
        env:
          API_KEY: ${{ secrets.API_KEY }}
        run: python main.py
      
      - uses: actions/upload-artifact@v4
        with:
          name: output
          path: output/
```


åäºŒã€çˆ¬èŸ²é˜²å°é–æŠ€è¡“
====================

ã€è¼•é‡ç´šç­–ç•¥ - é©ç”¨å‹å–„ APIã€‘

1. éš¨æ©Ÿå»¶é² (Jitter)
--------------------
```python
import time, random

# æ¯æ¬¡è«‹æ±‚å‰éš¨æ©Ÿç­‰å¾…ï¼Œæ‰“äº‚è«‹æ±‚é »ç‡
time.sleep(random.uniform(0.5, 1.5))
```

2. é™åˆ¶ä¸¦è¡Œæ•¸
-------------
```python
from concurrent.futures import ThreadPoolExecutor

MAX_WORKERS = 3  # æ§åˆ¶åŒæ™‚é€£ç·šæ•¸
with ThreadPoolExecutor(max_workers=MAX_WORKERS) as executor:
    ...
```

3. é‡è©¦æ©Ÿåˆ¶ + æŒ‡æ•¸é€€é¿
----------------------
```python
for attempt in range(3):
    try:
        response = requests.get(url, timeout=15)
        break
    except Exception as e:
        if "Rate limited" in str(e):
            time.sleep(random.uniform(15, 30))  # è¢«é™æµæ™‚é•·ä¼‘çœ 
        time.sleep(random.uniform(2, 5))  # é‡è©¦å‰éš¨æ©Ÿç­‰å¾…
```

4. æ‰¹æ¬¡ä¼‘æ¯
-----------
```python
# æ¯è™•ç† 100 ç­†å¼·åˆ¶ä¼‘æ¯
if count % 100 == 0:
    time.sleep(random.uniform(5, 10))
```

5. å¿«å–æ©Ÿåˆ¶
-----------
```python
import os

# æª”æ¡ˆå·²å­˜åœ¨å°±è·³é
if os.path.exists(out_path) and os.path.getsize(out_path) > 1000:
    return "skip"

# ç•¶æ—¥å¿«å–ï¼Œé¿å…é‡è¤‡æŠ“æ¸…å–®
from datetime import datetime
file_mtime = os.path.getmtime(cache_path)
if datetime.fromtimestamp(file_mtime).date() == datetime.now().date():
    return load_cache()
```

ã€é€²éšç­–ç•¥ - æ‡‰å°åš´æ ¼åçˆ¬ã€‘

6. User-Agent å½è£
------------------
```python
import random

USER_AGENTS = [
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 Chrome/120.0.0.0",
    "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 Safari/605.1.15",
    "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 Chrome/119.0.0.0",
]

headers = {"User-Agent": random.choice(USER_AGENTS)}
response = requests.get(url, headers=headers)
```

7. Proxy / IP è¼ªæ›
------------------
```python
proxies = [
    "http://proxy1:port",
    "http://proxy2:port",
]

proxy = {"http": random.choice(proxies), "https": random.choice(proxies)}
response = requests.get(url, proxies=proxy)
```

8. Cookie / Session ç®¡ç†
------------------------
```python
session = requests.Session()

# å…ˆè¨ªå•é¦–é å–å¾— cookie
session.get("https://example.com")

# å¾ŒçºŒè«‹æ±‚è‡ªå‹•å¸¶ cookie
response = session.get("https://example.com/api/data")
```

9. ç€è¦½å™¨æ¨¡æ“¬ (Playwright)
--------------------------
```python
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=True)
    page = browser.new_page()
    page.goto("https://example.com")
    content = page.content()
    browser.close()
```

GitHub Actions å®‰è£:
```yaml
- run: pip install playwright && playwright install chromium
```

10. Referer å½è£
----------------
```python
headers = {
    "User-Agent": "Mozilla/5.0 ...",
    "Referer": "https://example.com/",
    "Accept-Language": "en-US,en;q=0.9",
}
```

ã€ç­–ç•¥é¸æ“‡æŒ‡å—ã€‘

å ´æ™¯                          å»ºè­°ç­–ç•¥
----------------------------  ----------------------------------
å‹å–„ API (yfinance ç­‰)        éš¨æ©Ÿå»¶é² + é™åˆ¶ä¸¦è¡Œ + å¿«å–
ä¸€èˆ¬ç¶²é                       + User-Agent + Referer
æœ‰ Cloudflare ç­‰é˜²è­·          + Playwright ç€è¦½å™¨æ¨¡æ“¬
éœ€è¦å¤§é‡è«‹æ±‚                  + Proxy è¼ªæ›
éœ€è¦ç™»å…¥ç‹€æ…‹                  + Session/Cookie ç®¡ç†

ã€GitHub Actions ç‰¹åˆ¥æ³¨æ„ã€‘

1. å…±äº« IP - GitHub runner IP å¯èƒ½å·²è¢«éƒ¨åˆ†ç¶²ç«™æ¨™è¨˜
2. ç„¡æ³•æŒä¹…åŒ– - æ¯æ¬¡åŸ·è¡Œç’°å¢ƒé‡ç½®ï¼Œéœ€å¤–éƒ¨å„²å­˜å¿«å–
3. 6 å°æ™‚é™åˆ¶ - å¤§é‡çˆ¬å–éœ€åˆ†æ‰¹æˆ–ç”¨ matrix ä¸¦è¡Œ


åä¸‰ã€é€šçŸ¥æœå‹™æ•´åˆ
==================

ã€Telegram Bot - æ¨è–¦ã€‘

è¨­å®šæ­¥é©Ÿ:
1. æœå°‹ @BotFather â†’ ç™¼é€ /newbot
2. è¨­å®š Bot åç¨±èˆ‡ username (éœ€ä»¥ _bot çµå°¾)
3. å–å¾— Token
4. å°ä½ çš„ Bot ç™¼é€è¨Šæ¯å¾Œï¼Œè¨ªå•:
   https://api.telegram.org/bot<TOKEN>/getUpdates
5. å¾å›æ‡‰ä¸­æ‰¾åˆ° chat.id

Python ç™¼é€:
```python
import requests

def send_telegram(token, chat_id, message):
    requests.post(
        f"https://api.telegram.org/bot{token}/sendMessage",
        json={"chat_id": chat_id, "text": message, "parse_mode": "HTML"}
    )

# ç¯„ä¾‹
send_telegram(TOKEN, CHAT_ID, "ğŸ”” <b>åƒ¹æ ¼ç•°å‹•</b>\nå•†å“A: $100 â†’ $80")
```

GitHub Actions ä½¿ç”¨:
```yaml
env:
  TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
  TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}

steps:
  - name: Send Telegram
    run: |
      curl -s -X POST "https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage" \
        -d "chat_id=${TELEGRAM_CHAT_ID}" \
        -d "text=ğŸ”” ä»»å‹™å®Œæˆ"
```

ã€LINE Notifyã€‘

è¨­å®š: https://notify-bot.line.me/ å–å¾— Token

```python
def send_line(token, message):
    requests.post(
        "https://notify-api.line.me/api/notify",
        headers={"Authorization": f"Bearer {token}"},
        data={"message": message}
    )
```

ã€Discord Webhookã€‘

è¨­å®š: ä¼ºæœå™¨è¨­å®š â†’ æ•´åˆ â†’ Webhook â†’ è¤‡è£½ URL

```python
def send_discord(webhook_url, message):
    requests.post(webhook_url, json={"content": message})
```

ã€Resend Emailã€‘

å…è²»é¡åº¦: 3,000 å°/æœˆ
è¨­å®š: https://resend.com è¨»å†Šå–å¾— API Key

```python
import resend

resend.api_key = "re_xxxxx"
resend.Emails.send({
    "from": "é€šçŸ¥ <onboarding@resend.dev>",
    "to": ["your@email.com"],
    "subject": "æ¨™é¡Œ",
    "html": "<h1>å…§å®¹</h1>"
})
```

ã€Gmail SMTPã€‘

éœ€å…ˆå»ºç«‹æ‡‰ç”¨ç¨‹å¼å¯†ç¢¼: Google å¸³æˆ¶ â†’ å®‰å…¨æ€§ â†’ æ‡‰ç”¨ç¨‹å¼å¯†ç¢¼

```python
import smtplib
from email.mime.text import MIMEText

def send_gmail(sender, password, to, subject, body):
    msg = MIMEText(body)
    msg["Subject"] = subject
    msg["From"] = sender
    msg["To"] = to
    
    with smtplib.SMTP_SSL("smtp.gmail.com", 465) as server:
        server.login(sender, password)
        server.send_message(msg)
```

ã€æ¯”è¼ƒè¡¨ã€‘

æœå‹™            å…è²»é¡åº¦        è¨­å®šé›£åº¦    é©ç”¨å ´æ™¯
--------------  -------------  ----------  ------------------
Telegram        ç„¡é™åˆ¶          ç°¡å–®        å€‹äººé€šçŸ¥é¦–é¸
LINE Notify     ç„¡é™åˆ¶          ç°¡å–®        å°ç£ç”¨æˆ¶
Discord         ç„¡é™åˆ¶          æœ€ç°¡å–®      åœ˜éšŠ/ç¤¾ç¾¤é€šçŸ¥
Resend          3000å°/æœˆ       ä¸­ç­‰        æ­£å¼ Email é€šçŸ¥
Gmail SMTP      500å°/å¤©        ä¸­ç­‰        å‚™ç”¨æ–¹æ¡ˆ
